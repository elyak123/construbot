{% extends "base.html" %}

{% load i18n %}
{% load humanize %}
{% block title %} Estimación {{ estimate.consecutive|stringformat:"02d" }} {% endblock title %}
{% block content %}
  {% language 'es' %}
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display" rel="stylesheet">
    <h2 class="title d-print-none"> Detalle de Estimación </h2>
    <br class="d-print-none">
    <ul class="nav nav-tabs nav-pills d-print-none">
      <li class="nav-item">
        <a id="generator_appear" class="nav-link active" href="#">Generador</a>
      </li>
      {% if is_administrador %}
        <li class="nav-item">
          <a id="estimate_appear" class="nav-link" href="#">Estimación</a>
        </li>
      {% endif %}
      <li class="nav-item">
        <a id="print_es" class="nav-link" href="#">Imprimir</a>
      </li>
    </ul>
    <br class="d-print-none">
    <div style="display:none;" class="cont_estimacion">
      {% if is_administrador %}
        {% include "proyectos/concept_estimate.html" %}
      {% endif %}
    </div>
    <div class="cont_generator">
      {% include "proyectos/concept_generator.html" %}
    </div>
    <div class="d-print-none" style="text-align:center;">
      <a href="{% url 'proyectos:contrato_detail' estimate.project.id %}"><button type="button" class="btn btn-primary">Volver a detalle de contrato</button></a>
    </div>
  {% endlanguage %}
{% endblock content %}

{% block javascript %}
<script type="text/javascript">
  var list = {{ cantidad_de_conceptos }};
  var ch_list;
    if (list>0) {
      for(var i=0; i<list; i++){
        $("#img-"+i).css("height", '400px');
      }
      for(i=0; i<list; i++){
        ch_list = $("#img-"+i).children();
        if(ch_list.length>0){
          if(ch_list.length>1){
            ch_list.css("max-width", (100/ch_list.length)-1+'%');
            ch_list.css("max-height", 99+'%');
          } else {
            ch_list.css("max-height", 99+'%');
          }
        }
      }
    }
</script>
{% endblock %}

